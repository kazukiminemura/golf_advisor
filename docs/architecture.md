# アーキテクチャ

## 概要
本デモは二つのゴルフスイングを比較し、必要に応じてチャットボットによる助言を提供します。FastAPI で構築され、簡易的な Web UI を備えています。

## インフラ
- すべて一つの Docker コンテナ内で完結し、外部クラウドサービスは不要です。
- コンテナには FastAPI サーバー、姿勢抽出モデル、チャットボットのバックエンドが含まれます。

## データ管理
- アップロードされた動画や生成物（キーポイント、アノテーション済み動画、スコア）はローカルファイルシステムに保存します。
- データベースは使用せず、ファイルシステムをデータストアとして利用します。

## ユーザー管理
- 想定ユーザーは一人のため、認証・認可は実装していません。

## コンポーネント
- **フロントエンド** – `templates/` と `static/` の Jinja2 テンプレートと静的アセットからなる最小限の UI。
- **バックエンド** – `app.py` が動画アップロード、姿勢解析、チャットボットとのやり取り、システム統計を扱う FastAPI ルートを定義します。
- **解析サービス** – `backend/services/analysis_service.py` が OpenVINO または YOLO を用いてキーポイント抽出とスイングスコア計算を実行します。
- **チャットボットサービス** – `backend/services/chatbot_service.py` が解析結果を用いてスイング関連の質問に回答し、汎用チャットボットも提供します。
- **システムサービス** – `backend/services/system_service.py` が CPU・GPU・NPU・メモリ使用率を報告します。

## デプロイ
- Docker イメージをビルドして単一コンテナを起動し、ブラウザからアクセスします。
- リバースプロキシやロードバランサーは標準構成には含まれません。
